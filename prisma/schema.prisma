generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model tenant {
  id          String        @id(map: "tenants_pkey") @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name        String        @unique(map: "tenants_name_key") @db.VarChar
  created_at  DateTime      @default(now()) @db.Timestamp(6)
  updated_at  DateTime      @default(now()) @db.Timestamp(6)
  is_active   Boolean       @default(true)
  tenant_user tenant_user[]
}

model tenant_user {
  tenant_id  String   @db.Uuid
  user_id    String   @db.Uuid
  created_at DateTime @default(now()) @db.Timestamp(6)
  role       String   @db.VarChar
  tenant     tenant   @relation(fields: [tenant_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "tenant_user_tenant_id_fk")
  user       user     @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "tenant_user_user_id_fk")

  @@id([user_id, tenant_id], map: "tenant_user_pk")
}

model user {
  id              String        @id(map: "users_pkey") @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  email           String        @unique(map: "users_email_key")
  username        String
  hashed_password String
  is_active       Boolean       @default(true)
  created_at      DateTime      @default(now()) @db.Timestamptz(6)
  updated_at      DateTime      @default(now()) @db.Timestamptz(6)
  tenant_user     tenant_user[]
}
